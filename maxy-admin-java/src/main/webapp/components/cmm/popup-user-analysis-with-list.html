<!-- 사용자 분석 > 팝업 -->
<style>
    .maxInterval {
        color: #f4b608 !important;
        font-weight: bold;
    }

    .dark_mode .user_flow_graphic_wrap {
        background-color: var(--black-1);
    }

    #userPageFlow__popup .maxy_popup_title_left {
        max-width: calc(100% - 320px)!important;
    }

    .maxy_popup_title_left > span:nth-child(2) {
        max-width: 35vw !important;
    }

    .maxy_popup_title_right > div > span:nth-child(5) {
        color: #24BE86 !important;
        font-weight: 500;
    }

    .textarea_wrap.icon_info_box.hidden {
        display: none;
    }

    .user_flow_graphic_wrap {
        background-color: white;
        height: 100%; /* 전체 높이 */
        width: 74vw; /* 고정된 너비 */
        min-width: 1100px;
        visibility: hidden; /* 기본적으로 숨김 */
        overflow: hidden;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scaleX(0); /* 우측 끝에서 시작 (수평 크기 0) */
        transform-origin: right center; /* 우측 끝을 기준으로 애니메이션 */
        transition: transform 0.3s linear; /* 애니메이션 속도 증가 */
        padding: 0 30px 20px;
        border-radius: 5px;
    }

    .user_flow_graphic {
        display: flex;
        flex-direction: column;
        gap: 0.8em;
        height: 100%;
        overflow-y: auto;
        box-sizing: border-box;
        margin: 0;
    }

    .flow_popup_graph_wrap {
        display: flex;
        align-items: center;
        gap: 1em;
    }

    .flow_popup_graph_wrap .log_type {
        white-space: nowrap;
        width: 10vw;
        min-width: 10vw;
        overflow: auto;
    }

    .flow_popup_graph_head {
        position: relative;
        background-color: #f7f8fb;
        width: 100%;
        height: 1.8em;
    }

    .dark_mode .flow_popup_graph_head {
        background-color: #353434;
    }

    .flow_popup_graph_data {
        position: absolute;
        padding: 0.7em;
        height: 1.8em;
        border-radius: 25px;
        z-index: 2;
    }

    .flow_popup_graph_text {
        position: absolute;
        margin-left: 0.5%;
        white-space: nowrap;
    }

    .maxy_popup_gray_bg_wrap.user_flow_graphic_wrap .btn_graphic_close {
        position: fixed;
        left: 0;
        top: 50%;
    }

    #userPageFlow__popup .btn_graphic_open {
        position: fixed;
        width: 21px;
        height: 70px;
        right: 0;
        top: 50%;
        transform: translate(0, -50%);
        background-image: url(/images/maxy/button-user-flow-open.svg);
        background-repeat: no-repeat;
        background-size: 32px;
    }

    .dark_mode #userPageFlow__popup .btn_graphic_open {
        background-image: url(/images/maxy/dark-button-user-flow-open.svg);
    }

    #userPageFlow__popup .btn_graphic_close {
        position: fixed;
        z-index: 20;
        width: 21px;
        height: 70px;
        top: 41%;
        transform: translate(0, -50%);
        background-image: url(/images/maxy/button-user-flow-open.svg);
        rotate: 180deg;
        background-repeat: no-repeat;
        background-size: 32px;
    }

    .dark_mode #userPageFlow__popup .btn_graphic_close {
        background-image: url(/images/maxy/dark-button-user-flow-open.svg);
    }

    .maxy_popup_gray_bg_wrap.user_flow_graphic_wrap.hidden {
        visibility: visible; /* 보여지는 상태에서 축소 */
        transform: translate(-50%, -50%) scaleX(0); /* 수평 크기 0으로 축소 (우측 끝 기준) */
        transform-origin: right center; /* 우측 끝에서 접히도록 설정 */
    }

    .user_flow_graphic_wrap.show {
        visibility: visible; /* 보이도록 설정 */
        transform: translate(-50%, -50%) scaleX(1); /* 수평 크기 1로 확장 */
    }

    .user_flow_graphic_wrap.show .timeline_wrap.waterfall {
        grid-template-rows: 100%;
    }

    .user_flow_graphic_wrap.show .timeline_wrap.event {
        grid-template-rows: 100%
    }

    .user_flow_graphic_wrap .user_flow_graphic_chart {
        height: 100%;
        width: 100%;
        padding: 15px 20px;
        grid-template-rows: 22px 65px auto;
        position: relative;
    }

    .user_flow_graphic_wrap .user_flow_graphic_chart .user_flow_graphic_time_wrap {
        display: flex;
        justify-content: space-between; /* 아이템을 양 끝에 배치 */
        border-top: 1px solid #eeeeee;
        border-bottom: 1px solid #eeeeee;
    }

    .dark_mode .user_flow_graphic_wrap .user_flow_graphic_chart .user_flow_graphic_time_wrap {
        border-bottom: 1px solid var(--black-6);
        border-top: 1px solid var(--black-6);
    }

    .user_flow_graphic_wrap .user_flow_graphic_chart .user_flow_graphic_time_wrap.top {
        padding: 1em 3em 1em 12vw;
        margin-bottom: 1em;
        margin-top: 1em;
    }

    .user_flow_graphic_wrap .user_flow_graphic_chart .user_flow_graphic_time_wrap.bot {
        padding: 1em 3em 1em 12vw;
        margin-top: 2em;
    }

    .flow_popup_graph_data.httpRequest {
        background-color: #DFF5EF;
    }

    .flow_popup_graph_data.native {
        background-color: #DEF3FA;
    }

    .flow_popup_graph_data.error {
        background: url(/images/maxy/icon-mark-error.svg) no-repeat center / 20px;
    }

    .flow_popup_graph_data.crash {
        background: url(/images/maxy/icon-mark-crash.svg) no-repeat center /20px;
    }

    .flow_popup_graph_data.other {
        background-color: #FFF4D2;
    }

    .flow_popup_graph_data.ajax {
        background-color: #EBECFF;
    }

    .dark_mode .flow_popup_graph_data.other {
        background-color: #5A533B;
    }

    .dark_mode .flow_popup_graph_data.httpRequest {
        background-color: #465853;
    }

    .dark_mode .flow_popup_graph_data.native {
        background-color: #3F4F59;
    }

    .dark_mode .flow_popup_graph_data.crash {
        background-color: #694D4D;
    }

    .dark_mode .flow_popup_graph_data.ajax {
        background-color: #4A4C6F;
    }

    .dark_mode .flow_popup_graph_data.error {
        background: url(/images/maxy/dark-icon-mark-error.svg) no-repeat center / 20px;
    }

    .dark_mode .flow_popup_graph_data.crash {
        background: url(/images/maxy/dark-icon-mark-crash.svg) no-repeat center / 20px;
    }

    .flow_popup_graph_data:not(.error):not(.crash)::before {
        content: '';
        margin-top: -0.1em;
        margin-left: -0.9em;
        display: inline-block;
        width: 8px;
        height: 8px;
        border-radius: 5px;
    }

    .flow_popup_graph_data:not(.error):not(.crash)::after {
        position: absolute;
        right: 0;
        content: '';
        margin-top: -0.1em;
        margin-left: -1em;
        display: inline-block;
        width: 8px;
        height: 8px;
        border-radius: 5px;
    }

    .flow_popup_graph_data.ajax::before,
    .flow_popup_graph_data.ajax::after {
        background-color: #7277FF;
    }

    .flow_popup_graph_data.other::before,
    .flow_popup_graph_data.other::after {
        background-color: #FFC700;
    }

    .flow_popup_graph_data.native::before,
    .flow_popup_graph_data.native::after {
        background-color: #35B2DA;
    }

    .flow_popup_graph_data.httpRequest::before,
    .flow_popup_graph_data.httpRequest::after {
        background-color: #24BE86;
    }

    .user_flow_graphic_log_type {
        display: flex;
        flex-direction: column;
        gap: 13px;
    }

    .user_flow_graphic_log_type > div {
        white-space: nowrap;
        overflow-y: auto;
    }

    .user_flow_graphic_time_wrap .border {
        border-left: 1px solid #eeeeee;
        border-right: 1px solid #eeeeee;
    }

    .dark_mode .user_flow_graphic_time_wrap .border {
        border-left: 1px solid #353739;
        border-right: 1px solid #353739;
    }

    .user_flow_graphic_time_line {
        top: calc(7em) !important; /* .user_flow_graphic_time_wrap.top의 간격(padding-top) */
        height: calc(100% - 7em) !important; /* .user_flow_graphic_time_wrap.top&.bot의 간격(top:padding-top, bot:padding-bottom) */
    }

    .maxy_popup_gray_bg_wrap .waterfall_graph_wrap {
        height: auto;
    }

    .dark_mode .maxy_popup_common .waterfall_graph_wrap {
        border-radius: var(--radius);
    }

    .user_flow_graphic_wrap .graph_title_wrap {
        display: flex;
        align-items: center;
        gap: 0.3vw;
        font-weight: bold;
        height: 22px;
    }

    .graph_title_wrap .icon_resource_time_line {
        display: inline-block;
        width: 20px;
        height: 21px;
        background-repeat: no-repeat;
        background-size: 18px;
        background-image: url(/images/maxy/icon-resource-time-line.svg);
    }

    .dark_mode .graph_title_wrap .icon_resource_time_line {
        background-image: url(/images/maxy/dark-icon-resource-time-line.svg);
    }

    .graph_title_wrap .icon_event_time_line {
        display: inline-block;
        width: 20px;
        height: 21px;
        background-repeat: no-repeat;
        background-size: 18px;
        background-image: url(/images/maxy/icon-event-time-line.svg);
    }

    .dark_mode .graph_title_wrap .icon_event_time_line {
        background-image: url(/images/maxy/dark-icon-event-time-line.svg);
    }

    .user_flow_graphic_wrap .waterfall_graph_wrap.no_data::before {
        top: 60%;
    }

    .tippy-box[data-theme~='maxy-tooltip'], .tippy-box[data-theme~='maxy-tooltip'] b {
        font-size: 1em;
    }

    .btn_expand_wrap {
        display: flex;
        gap: .5em;
        margin-top: .5em;
        justify-content: flex-end;
        align-items: center;
    }

    .btn_expand_wrap .btn_expand {
        width: 20px;
        height: 20px;
        background-repeat: no-repeat;
        background-size: 20px;
    }

    .btn_expand_wrap .btn_expand.icon_expand_top {
        background-image: url(/images/maxy/icon-expand-top-off.svg);
    }

    .btn_expand_wrap .btn_expand.icon_expand_top.on {
        background-image: url(/images/maxy/icon-expand-top-on.svg);
    }

    .btn_expand_wrap .btn_expand.icon_expand_bottom {
        background-image: url(/images/maxy/icon-expand-bot-off.svg);
    }

    .btn_expand_wrap .btn_expand.icon_expand_bottom.on {
        background-image: url(/images/maxy/icon-expand-bot-on.svg);
    }

    .btn_expand_wrap .btn_expand.icon_expand_reset {
        background-image: url(/images/maxy/icon-expand-reset-off.svg);
    }

    .btn_expand_wrap .btn_expand.icon_expand_reset.on {
        background-image: url(/images/maxy/icon-expand-reset-on.svg);
    }

    .dark_mode .btn_expand_wrap .btn_expand.icon_expand_top {
        background-image: url(/images/maxy/dark-icon-expand-top-off.svg);
    }

    .dark_mode .btn_expand_wrap .btn_expand.icon_expand_top.on {
        background-image: url(/images/maxy/dark-icon-expand-top-on.svg);
    }

    .dark_mode .btn_expand_wrap .btn_expand.icon_expand_bottom {
        background-image: url(/images/maxy/dark-icon-expand-bot-off.svg);
    }

    .dark_mode .btn_expand_wrap .btn_expand.icon_expand_bottom.on {
        background-image: url(/images/maxy/dark-icon-expand-bot-on.svg);
    }

    .dark_mode .btn_expand_wrap .btn_expand.icon_expand_reset {
        background-image: url(/images/maxy/dark-icon-expand-reset-off.svg);
    }

    .dark_mode .btn_expand_wrap .btn_expand.icon_expand_reset.on {
        background-image: url(/images/maxy/dark-icon-expand-reset-on.svg);
    }

    .user_flow_graphic_wrap  .timeline_wrap {
        display: grid;
        gap: .5em;
        height: calc(100% - 38px);
        grid-template-rows: 45% auto;
    }

    #userPageFlow__tableFilter > select,
    #userPageFlow__tableFilter > input[type="text"] {
        height: 26px;
    }

    .dark_mode .maxy_popup_title_right input[type="text"].search_log_type {
        border: 1px solid var(--color-table-row-dark-1) !important;
    }

    .no_data::before {
        z-index: 0;
    }

    .event_time_wrap {
        height: calc(100% - 28px);
    }

    .event_time_line_wrap {
        border: 1px #e3e5e8 solid;
        box-shadow: none;
    }

    .dark_mode .event_time_line_wrap {
        border: none;
    }

    .log_type_detail_header .img_icon_wide_point_btn {
        height: 24px;
    }

</style>
<div class="maxy_popup_common" id="{{id}}__popup">
    <button class="btn_graphic_open" id="btnGraphicOpen"></button>
    <div class="maxy_popup_grid_s_wrap">
        <div class="maxy_popup_title_wrap">
            <div class="maxy_popup_title_left">
                <img alt="" class="maxy_popup_analysis_icon">
                <span class="popup_title">Analysis/</span>
                <span id="{{id}}title">{{title}}</span>
                <span class="popup_count" id="count"></span>
                <button class="btn_alias"></button>
            </div>
            <div class="maxy_popup_title_right" id="{{id}}__tableFilter">
                <select class="search_key">
                    <option data-t="common.tableColumn.logClass" value="logClass"></option>
                    <option data-t="common.tableColumn.logType" value="logTypeDetail"></option>
                </select>
                <input class="search_log_type" autocomplete="off" type="text"/>
            </div>
        </div>

        <div class="maxy_popup_table_wrap" id="{{id}}__logList"></div>
        <div class="maxy_popup_gray_bg_wrap" id="{{id}}__logDetail">
            <div class="grid_wrap">
                <div class="icon_info_box dv2">
                    <div class="dv2_left_wrap">
                        <div class="icon_head">
                            <i class="icon-device-purple"></i>
                            <div>
                                <span class="txt device_info" id="pDeviceModel">-</span>
                                <img alt="" class="btn_page_flow" id="btnPageFlow">
                            </div>
                        </div>

                        <div class="icon_detail">
                            <div class="detail_dv_wrap">
                                <div>
                                    <p data-t="common.text.networkType"></p>
                                    <div class="bg_gray_wrap">
                                        <i class="icon_network_type"></i>
                                        <span class="txt" id="pComType">-</span>
                                    </div>

                                </div>
                                <div>
                                    <p data-t="common.text.carrier"></p>
                                    <div class="bg_gray_wrap">
                                        <i class="icon_simoperator"></i>
                                        <span class="txt" id="pSimOperatorNm">-</span>
                                    </div>
                                </div>
                                <div>
                                    <p id="networkIp"></p>
                                    <div class="network_status_wrap">
                                        <span class="network_status"></span>
                                        <span class="txt" id="pComSensitivity">-</span>
                                    </div>
                                </div>
                                <div>
                                    <p data-t="common.text.location"></p>
                                    <div class="bg_gray_wrap">
                                        <i class="icon_time_zone"></i>
                                        <span class="txt" id="pLocation">-</span>
                                    </div>

                                </div>
                            </div>

                            <div class="detail_dv_wrap">
                                <div>
                                    <p data-t="common.tableColumn.pageType"></p>
                                    <div class="bg_gray_wrap">
                                        <i class="icon_log_type"></i>
                                        <span class="txt" id="pPageType">-</span>
                                    </div>
                                </div>
                                <div>
                                    <p data-t="common.text.webviewVersion"></p>
                                    <span class="txt purple" id="pWebviewVer">-</span>
                                </div>
                                <div>
                                    <p data-t="common.tableColumn.osVer"></p>
                                    <div class="bg_gray_wrap" id="pOsVerWrap">
                                        <img alt="" class="icon ic_sm_ios">
                                        <img alt="" class="icon ic_sm_android on">
                                        <span class="txt" id="pOsVer">-</span>
                                    </div>

                                </div>
                                <div>
                                    <p data-t="common.text.appBuildNum"></p>
                                    <span class="txt purple" id="pAppBuildNum">-</span>
                                </div>
                                <div>
                                    <p data-t="common.tableColumn.appVer"></p>
                                    <div class="bg_gray_wrap">
                                        <i class="icon_gear"></i>
                                        <span class="txt" id="pAppVer">-</span>
                                    </div>

                                </div>
                                <div>
                                    <p data-t="common.text.userId"></p>
                                    <span class="txt purple" id="pUserId">-</span>

                                </div>
                            </div>

                            <div class="detail_dv_wrap">
                                <div>
                                    <p data-t="common.text.storageUsage"></p>
                                    <span class="txt purple" id="pStorageUsage">-</span>
                                </div>
                                <div>
                                    <p data-t="common.tableColumn.memoryusage"></p>
                                    <span class="txt purple" id="pMemUsage">-</span>
                                </div>
                                <div>
                                    <p data-t="common.text.batUsage"></p>
                                    <div class="percentage_wrap">
                                        <div class="mini_progress_wrap" data-bgcolor="#7277FF" id="pBatteryUsage"></div>
                                    </div>
                                </div>
                                <div>
                                    <p data-t="common.tableColumn.cpuUsage"></p>
                                    <div class="percentage_wrap">
                                        <div class="mini_progress_wrap" data-bgcolor="#7277FF" id="pCpuUsage"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="detail_dv_wrap">
                                <div>
                                    <p data-t="common.tableColumn.loadingtime"></p>
                                    <span class="txt purple" id="pLoadingTime">-</span>
                                </div>
                                <div>
                                    <p data-t="common.tableColumn.responseTime"></p>
                                    <span class="txt purple" id="pResponseTime">-</span>
                                </div>
                                <div>
                                    <p data-t="common.tableColumn.med"></p>
                                    <span class="txt purple" id="pLoadingTimeAvg">-</span>
                                </div>
                                <div>
                                    <p data-t="common.tableColumn.med"></p>
                                    <span class="txt purple" id="pResponseTimeAvg">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grd_dv2_wrap">
                    <div class="textarea_wrap icon_info_box">
                        <textarea class="enable_scrollbar" id="pReqUrl" readonly></textarea>
                    </div>

                    <div class="icon_info_box" id="logDetail">
                        <div class="textarea_wrap log_res_msg_wrap">
                            <textarea class="enable_scrollbar" id="pResMsg" readonly></textarea>
                        </div>
                        <div class="popup_log_type_detail_wrap">
                            <div class="log_type_detail_header">
                                <!--  category  -->
                                <div class="category_wrap">
                                    <span data-category="inapp">In App</span>
                                    <span data-category="web">Web</span>
                                    <span data-category="network">Network</span>
                                    <span data-category="crash">Crash</span>
                                    <span data-category="etc">Etc.</span>
                                </div>
                                <img class="img_icon_wide_point_btn" alt="" id="btnSourceMap">
                            </div>
                            <!-- detail   -->
                            <div class="log_detail_contents_wrap">
                                <div class="log_type_details">
                                    <div class="bold_purple log_type_detail_title" data-log-type="error">
                                        Exception Type:
                                    </div>
                                    <div class="bold_purple log_type_detail_title" data-log-type="crash">
                                        Crash Type:
                                    </div>
                                    <div class="bold_purple log_type_detail_title" data-log-type="code">
                                        HTTP Code:
                                    </div>
                                    <div class="textarea_wrap">
                                        <textarea class="enable_scrollbar" id="pTypeError" readonly></textarea>
                                    </div>
                                </div>
                                <div class="log_type_details">
                                    <div class="bold_purple">Message from OS:</div>
                                    <div class="textarea_wrap">
                                        <textarea class="red enable_scrollbar" id="pMessages" readonly></textarea>
                                    </div>
                                </div>

                                <div class="log_type_details">
                                    <div class="bold_purple">Full Text:</div>
                                    <div class="textarea_wrap">
                                        <textarea class="enable_scrollbar" id="logDetailFullText" readonly></textarea>
                                    </div>
                                </div>

                                <div class="log_type_details">
                                    <div class="bold_purple">Stack Trace (Thru. Sourcemaps):</div>
                                    <div class="textarea_wrap">
                                        <textarea class="enable_scrollbar" id="logDetailSourceMap" readonly></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="textarea_wrap icon_info_box hidden" id="txidWrap">
                        <textarea class="enable_scrollbar" id="ptxid" readonly></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <input id="maxIntervalTime" type="hidden">
    <input id="test_osVer" type="hidden">
    <input id="test_appVer" type="hidden">
    <input id="test_deviceModel" type="hidden">

    <div class="maxy_popup_gray_bg_wrap user_flow_graphic_wrap" id="userFlowGraphicWrap">
        <div class="btn_expand_wrap">
            <!--<button class="btn_expand icon_expand_reset" id="btnOpenReset" data-type="reset"></button>-->
            <button class="btn_expand icon_expand_bottom" id="btnOpenWaterfall" data-type="waterfall"></button>
            <button class="btn_expand icon_expand_top on" id="btnOpenEvent" data-type="event"></button>
        </div>
        <button class="btn_graphic_close" id="btnGraphicClose"></button>

        <div class="web_chart_wrap">
            <div class="web_vital_wrap maxy_box" id="{{id}}__webVitalFull"></div>
            <div class="web_performance_wrap maxy_box" id="{{id}}__waterfall"></div>
        </div>
        <div class="event_time_wrap">
            <div class="event_time_line_wrap" id="{{id}}__eventTimeLine"></div>
        </div>
    </div>

    <!--source map guide slide popup-->
    <div class="maxy_popup_gray_bg_wrap popup_right_side_wrap log_detail_slide">
        <div id="{{id}}__logDetailSlide"></div>
    </div>
</div>


