{
"size" : #{size},
 "query" : {
    "bool" : {
      "must" : [
        {
          "bool" : {
            "must" : [
              {
                "term" : {
                  "packageNm" : {
                    "value" : #{packageNm}
                  }
                }
              },
              {
                "term" : {
                  "serverType" : {
                    "value" : #{serverType}
                  }
                }
              }
    #[searchDeviceId]
            ,{
              "term":{
                "deviceId.raw" : {
                  "value" : #{searchValue}
                }
              }
            }
    #[/searchDeviceId]
    #[searchVipYn]
            ,{
              "term":{
                "vipYn" : {
                  "value" : #{vipYn}
                }
              }
            }
    #[/searchVipYn]
    #[searchLogType]
          ,{
            "range":{
              "logType" : {
                "gte" : #{fromLogType},
                "lt": #{toLogType}
              }
            }
          }
    #[/searchLogType]
    #[isOsType]
          ,{
            "term":{
              "osType" : {
                "value" : #{osType}
              }
            }
          }
    #[/isOsType]
    #[searchUserNm]
            ,{
              "match":{
                "userNm" : {
                  "query": #{searchValue}
          }
        }
      }
    #[/searchUserNm]
    #[searchUserId]
          ,{
            "match":{
              "userId" : {
                "query": #{searchValue}
              }
            }
          }
    #[/searchUserId]
    #[searchReqUrl]
          ,{
            "term":{
              "reqUrl" : {
                "query": #{searchValue},
                "operator": "and"
              }
            }
          }
    #[/searchReqUrl]
    #[searchPhoneNo]
          ,{
            "term":{
              "phoneNo" : {
                "query": #{searchValue},
                "operator": "and"
              }
            }
          }
    #[/searchPhoneNo]
            ],
            "adjust_pure_negative" : true
          }
        },
        {
          "range" : {
            "pageStartTm" : {
              "from" : #{fromDt},
              "to" : #{toDt},
              "include_lower" : true,
              "include_upper" : true,
              "time_zone" : "Z"
            }
          }
        }
      ],
      "adjust_pure_negative" : true
    }
  },
  "sort" : [
    {
      "pageStartTm" : {
      "order" : "desc",
      "missing" : "_last",
      "unmapped_type" : "long"
      }
    }
  ]
}