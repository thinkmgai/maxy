{
  "query": {
    "bool": {
      "must": [
        {
          "bool" : {
            "must" : [
              {
                "term" : {
                  "packageNm" : {
                    "value" : #{packageNm}
                  }
                }
              },
              {
                "term" : {
                  "serverType" : {
                    "value" : #{serverType}
                  }
                }
              },
              #[isAppVer]
              {
                "term" : {
                  "appVer" : {
                    "value" : #{appVer}
                  }
                }
              },
              #[/isAppVer]
              {
                "term" : {
                  "activeSt" : {
                    "value" : "Y"
                  }
                }
              },
              {
                "range": {
                  "appStartTm": {
                    "gte": #{searchFromDt},
                    "lte": #{searchToDt}
                  }
                }
              },
              {
                "bool": {
                  "must" : [
                    {
                      "terms": {
                        "deviceSt": ["N", "R"]
                      }
                    },
                    {
                      "term" : {
                        "appReinstallYn": "N"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ]
    }
  }
}